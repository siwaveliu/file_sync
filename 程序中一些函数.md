---
title: 程序中一些函数 
tags: PLC,代码,keywords
grammar_cjkRuby: true
---
void HAL_PlcPhyTraceTimingData() 打印时间信息
void HAL_PlcPhyIsr(void) mac 发送中断信息。
NML_CcoMacHashTableClearAll() 清除哈希表中其它信息
#define EXT_IRQ_REG                       ((EIRQ_RegTypeDef \*)(EXT_IRQ_REG_BASE))  过零寄存器地址
 PLC_PHY_WorkConfigReg;   phy 硬件寄存器

HAL_PlcPhyQueryTfoPresetStatus #查询TFO预置值
MAC_HandlePhyTestConfigReq #配置物理层测试模式
MAC_PHY_TEST_NEW_LOOPBACK_MODE # 物理层回传模式

## 物理层配置
hal_plc_phy.c 
### 发送增益
PLC_PHY_IntParaReg # 发送参数配置，如tx gain
PLC_PHY_INT_PARA_REG->TX_GAIN


### 复位 phy
#ifndef SIWP9006F    
    if (immediate)
    {
        DRV_SET_BITS(SOC_SYSTEM_RST_REG, (1UL << (PIN_MUX_PHY_RX_RST)));
    }
#endif /* !SIWP9006F */

    PLC_PHY_TX_REG->MODE |= PLC_PHY_TX_MODE_TX_EN_SET;

#ifndef SIWP9006F 
    if (immediate)
    {
        DRV_CLEAR_BITS(SOC_SYSTEM_RST_REG, (1UL << (PIN_MUX_PHY_RX_RST)));
    }